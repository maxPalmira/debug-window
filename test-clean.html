<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Clean Debug Test</title>
    <style>
        body { font-family: Arial, sans-serif; background: #1a1a1a; color: #fff; padding: 20px; }
        button { background: #007acc; color: white; border: none; padding: 10px; margin: 5px; border-radius: 4px; cursor: pointer; }
        #output { background: #2d2d2d; border: 1px solid #555; padding: 15px; margin: 20px 0; border-radius: 8px; }
    </style>
</head>
<body>
    <h1>ðŸ§ª Clean Debug Window Test</h1>
    
    <button onclick="step1()">Step 1: Create DebugWindow</button>
    <button onclick="step2()">Step 2: Test addTextInput</button>
    <button onclick="step3()">Step 3: Test Collapse</button>
    
    <div id="output">Ready to test...</div>

    <script src="https://cdn.jsdelivr.net/npm/moveable@0.53.0/dist/moveable.min.js"></script>
    <script src="debug-window.js"></script>
    
    <script>
        let testWindow = null;
        
        function log(msg) {
            document.getElementById('output').innerHTML += '<br>' + msg;
            console.log(msg);
        }
        
        function step1() {
            document.getElementById('output').innerHTML = '';
            log('ðŸ”§ Step 1: Creating DebugWindow...');
            
            try {
                testWindow = new DebugWindow({
                    title: 'Clean Test Window',
                    position: { x: 50, y: 50 },
                    size: { width: 300, height: 300 }
                });
                
                log('âœ… DebugWindow constructor worked');
                
                testWindow.init();
                
                log('âœ… DebugWindow.init() worked');
                log('ðŸ“‹ Available methods: ' + Object.getOwnPropertyNames(Object.getPrototypeOf(testWindow)).filter(m => !m.startsWith('_')).join(', '));
                
            } catch (error) {
                log('âŒ Error in step 1: ' + error.message);
                log('Stack: ' + error.stack);
            }
        }
        
        function step2() {
            log('ðŸ”§ Step 2: Testing addTextInput...');
            
            if (!testWindow) {
                log('âŒ No test window. Run Step 1 first.');
                return;
            }
            
            try {
                log('ðŸ” Checking if addTextInput exists: ' + (typeof testWindow.addTextInput));
                
                if (typeof testWindow.addTextInput !== 'function') {
                    log('âŒ addTextInput is not a function!');
                    return;
                }
                
                testWindow.addTextInput('Test Input', 'hello world', (value) => {
                    log('ðŸ“ Input changed to: ' + value);
                });
                
                log('âœ… addTextInput() worked!');
                
            } catch (error) {
                log('âŒ Error in step 2: ' + error.message);
                log('Stack: ' + error.stack);
            }
        }
        
        function step3() {
            log('ðŸ”§ Step 3: Testing toggleCollapse...');
            
            if (!testWindow) {
                log('âŒ No test window. Run Step 1 first.');
                return;
            }
            
            try {
                testWindow.toggleCollapse();
                log('âœ… toggleCollapse() worked!');
                
                setTimeout(() => {
                    testWindow.toggleCollapse();
                    log('âœ… toggleCollapse() worked again!');
                }, 1000);
                
            } catch (error) {
                log('âŒ Error in step 3: ' + error.message);
            }
        }
        
        // Auto-start testing
        window.addEventListener('load', () => {
            setTimeout(step1, 500);
        });
    </script>
</body>
</html> 