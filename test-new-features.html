<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test New Features - Debug Window</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: #1a1a1a;
            color: #ffffff;
            margin: 20px;
        }
        .test-button {
            background: #007acc;
            color: white;
            border: none;
            padding: 10px 15px;
            margin: 5px;
            border-radius: 4px;
            cursor: pointer;
        }
        .test-button:hover {
            background: #005a9a;
        }
    </style>
</head>
<body>
    <h1>ðŸ§ª Testing New Features</h1>
    <h2>Features to Test:</h2>
    <ul>
        <li>âœ… Text Input Fields</li>
        <li>âœ… Collapsible Window (minimize button)</li>
        <li>âœ… State persistence for collapse state</li>
    </ul>
    
    <div>
        <button class="test-button" onclick="createWindow()">Create Debug Window</button>
        <button class="test-button" onclick="addTextInputs()">Add Text Inputs</button>
        <button class="test-button" onclick="testCollapse()">Toggle Collapse</button>
        <button class="test-button" onclick="testPersistence()">Test State Persistence</button>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/moveable@0.53.0/dist/moveable.min.js"></script>
    <script src="debug-window.js"></script>
    
    <script>
        let debugWindow = null;
        
        function createWindow() {
            if (debugWindow) debugWindow.destroy();
            
            debugWindow = new DebugWindow({
                title: 'ðŸ§ª Feature Test Window',
                position: { x: 50, y: 50 },
                size: { width: 400, height: 500 }
            });
            
            debugWindow.init();
            debugWindow.addLog('Debug window created successfully!', 'info');
            console.log('âœ… Window created');
        }
        
        function addTextInputs() {
            if (!debugWindow) {
                alert('Please create a window first!');
                return;
            }
            
            // Add various text inputs
            debugWindow.addTextInput('Server URL', 'https://api.example.com', (value) => {
                debugWindow.addLog(`Server URL: ${value}`, 'info');
            }, { placeholder: 'Enter server URL...' });
            
            debugWindow.addTextInput('API Key', '', (value) => {
                debugWindow.addLog(`API Key ${value ? 'set' : 'cleared'}`, value ? 'info' : 'warning');
            }, { placeholder: 'Enter your API key...' });
            
            debugWindow.addTextInput('Port Number', '8080', (value) => {
                if (value && !isNaN(value) && parseInt(value) > 0) {
                    debugWindow.addLog(`Port set to ${value}`, 'info');
                } else if (value) {
                    debugWindow.addLog(`Invalid port: ${value}`, 'error');
                }
            }, { placeholder: 'Enter port number...' });
            
            debugWindow.addTextInput('Username', 'admin', (value) => {
                debugWindow.addLog(`Username: ${value}`, 'info');
            });
            
            console.log('âœ… Text inputs added');
        }
        
        function testCollapse() {
            if (!debugWindow) {
                alert('Please create a window first!');
                return;
            }
            
            debugWindow.toggleCollapse();
            debugWindow.addLog('Window collapse toggled!', 'info');
            console.log('âœ… Collapse toggled');
        }
        
        function testPersistence() {
            if (!debugWindow) {
                alert('Please create a window first!');
                return;
            }
            
            // Test state saving and loading
            debugWindow.saveState();
            debugWindow.addLog('State saved!', 'info');
            
            setTimeout(() => {
                debugWindow.destroy();
                debugWindow = null;
                
                setTimeout(() => {
                    debugWindow = new DebugWindow({
                        title: 'ðŸ”„ Restored Window',
                        storageKey: 'debugWindow' // Same key to restore state
                    });
                    debugWindow.init();
                    debugWindow.addLog('Window restored from saved state!', 'info');
                    console.log('âœ… State persistence tested');
                }, 500);
            }, 1000);
        }
        
        // Auto-create window on load
        window.addEventListener('load', () => {
            setTimeout(createWindow, 500);
        });
    </script>
</body>
</html> 